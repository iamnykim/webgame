<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¡œë˜ì¶”ì²¨ê¸°</title>
</head>
<body>
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }
        .ball {
          display: flex;
          justify-content: center;
          border: 2px solid green; 
          border-radius: 20px; 
          width: 40px;
          height: 40px;
          font-size: 20px; 
          text-align: center; 
          color: green;
        }
        
        .box { display: flex; flex-direction: column; align-items: center; }
        .title {font-size: 40px; color: green; font-style: italic; margin: 25px 0;}
        .flex { display: flex; flex-wrap: wrap;}
        .flex .ball:last-child {margin-right: 0;}
        .text-center {text-align: center;}
        input { width: 300px; line-height: 50px; font-size: 24px; text-align: center; vertical-align: top; }
        input::placeholder { font-size: 16px; }
        button { width: 70px; line-height: 50px; font-size: 16px; vertical-align: top; }
        
    </style>
    <div class="box">
        <h5 class="title">Lotte Raffle</h5>
        <form id="form">
            <input name="input" placeholder="ìˆ«ì 6ê°œë¥¼ ì‰¼í‘œë¡œ êµ¬ë¶„í•´ ì…ë ¥í•˜ì„¸ìš”." />
            <button>ì¶”ì²¨</button>
        </form>
       <div style="margin: 20px 0;">
            <p class="text-center" style="margin: 20px 0;">âœ¨ë‹¹ì²¨ ìˆ«ì</p>
            <div id="result" style="display:flex; flex-wrap: wrap; justify-content: center; width:300px; gap: 20px;"></div>
        </div>
        <div style="margin: 20px 0;"><p class="text-center">âœ¨ë³´ë„ˆìŠ¤ ìˆ«ì</p> </div><div id="bonus" style="display:flex; justify-content: center; flex-wrap: wrap; width:300px; gap: 20px;"></div></div>
    </div>

    <script>
      const $form = document.querySelector('#form');
      const $result = document.querySelector('#result');
      const $bonus = document.querySelector('#bonus');
      function drawBall(number, $parent) {
        const $ball = document.createElement('div');
        $ball.className = 'ball';
        $ball.textContent = number;
        $parent.appendChild($ball);
      }
      const setTimeoutPromise = (ms) => new Promise((resolve, reject) => {
        setTimeout(resolve, ms);
      });
      $form.addEventListener('submit', async (event) => {
        event.preventDefault();
        const string = event.target.input.value;
        if (!string.trim()) {
          return alert('ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
        }
        const myNumbers = string.split(',').map((v) => parseInt(v.trim()));
        if (myNumbers.length !== 6) {
          return alert('6ê°œì˜ ìˆ«ìë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
        }
        if (new Set(myNumbers).size !== 6) {
          return alert('ì¤‘ë³µë˜ì§€ ì•Šê²Œ ì…ë ¥í•˜ì„¸ìš”.');
        }
        if (myNumbers.find((v) => v > 45 || v < 1)) {
          return alert('1ë¶€í„° 45ê¹Œì§€ë§Œ ì…ë ¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤');
        }
        const candidate = Array(45).fill().map((v, i) => i + 1);
        const shuffle = [];
        while (candidate.length > 0) {
          const random = Math.floor(Math.random() * candidate.length); // ë¬´ì‘ìœ„ ì¸ë±ìŠ¤ ë½‘ê¸° 
          const spliceArray = candidate.splice(random, 1); // ë½‘ì€ ê°’ì€ ë°°ì—´ì— ë“¤ì–´ ìˆìŒ 
          const value = spliceArray[0]; // ë°°ì—´ì— ë“¤ì–´ ìˆëŠ” ê°’ì„ êº¼ë‚´ê³  
          shuffle.push(value); // shuffle ë°°ì—´ì— ë„£ê¸°
        }
        console.log(shuffle);
        const winBalls = shuffle.slice(0, 6).sort((a, b) => a - b);
        const bonus = shuffle[6];
        console.log(winBalls, bonus);
        for (let i = 0; i < winBalls.length; i++) {
          await setTimeoutPromise(1000);
          console.log(winBalls[i], i);
          drawBall(winBalls[i], $result);
        }
        await setTimeoutPromise(1000);
        drawBall(bonus, $bonus);
        await setTimeoutPromise(0);
        let count = 0;
        myNumbers.forEach((my) => {
          if (winBalls.includes(my)) {
            count++;
          }
        });
        if (count === 6) {
          alert('ğŸŠ1ë“±!!!!!ğŸŠ');
        } else if (count === 5) {
          if (myNumbers.includes(bonus)) {
            alert('2ë“±!! ë³´ë„ˆìŠ¤ ê³µì´ì§€ë§Œ 6ê°œ ë§ì¶”ì…¨ë„¤ìš”.ğŸˆ');
          } else {
            alert('3ë“±!! ì•„ì‰½ìŠµë‹ˆë‹¤... ê·¸ë˜ë„ ì¶•í•˜ë“œë ¤ìš”!âœ¨ã„´')
          }
        } else if (count === 4) {
          alert('4ë“±!! 5ë§Œì› ì¶•í•˜ë“œë ¤ìš”!');
        } else if (count === 3) {
          alert('5ë“±!! 5ì²œì› ì¶•í•˜ë“œë ¤ìš”!');
        } else {
          alert('ë¡œë˜ ì°¸ ì–´ë µì¥¬?(â”¬â”¬ï¹â”¬â”¬)');
        }
      });
    </script>
</body>
</html>